<!DOCTYPE html>
<html>
    <head><meta name="generator" content="Hexo 3.8.0">
        <title>哈哈哈,新出的html5 震动功能</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">
        <style type="text/css">
        	html,body{
        		width: 100%;
        		height: 100%;
        		overflow: hidden;
        		padding: 0;
        		margin: 0;
        	}
        	.btn{
        		width: 120px;
        		height: 120px;
        		position: absolute;
        		top: 50%;
        		margin-top: -60px;
        		left: 50%;
        		margin-left: -60px;
        		text-align: center;
        	}
        	.btn-shake,
        	.btn-pause{
        		display: inline-block;
        		width: 120px;
        		height: 120px;
        		line-height: 120px;
        		font-size: 36px;
        		border-radius: 50%;
        		-webkit-tap-highlight-color:transparent;
        	}
        	.btn-shake{
        		color: #fff;
        		background-color: rgba(132, 193, 104, 0.94);
        	}
        	.btn-pause{
        		color: #fff;
        		display: none;
        		background-color: rgba(20, 150, 191, 0.95);
        	}
        	.btn-pause:before,.btn-pause:after{
        		display: block;
        		content: ' ';
        		position: absolute;
        		left: -10px;
        		top: -10px;
        		width: 100%;
        		height: 100%;
        		border-radius: 50%;
        	}
        	.pause .btn-shake{
        		display: none;
        	}
        	.pause .btn-pause{
        		display: inline-block;
        	}
        </style>
    </head>
    <body>
    	<div id="btn-wrapper" class="btn">
    		<a id="shake" class="btn-shake">
    			震动
    		</a>
    		<a id="pause" class="btn-pause">
    			暂停
    		</a>
    	</div>
    	<script type="text/javascript">
    	var shakeObj={
    		timer:null,
    		shake:function(time){
    			var _that=this;
    			if (!navigator.vibrate) {
	    			alert("您的浏览器不支持震动,iPhone手机任何浏览器都好像也不行额,用Android手机换最新版的UC浏览器或者chrome浏览器试试呢.\n\r ^_^||");
	    			return;
	    		};
    			function _shake(){
    				navigator.vibrate(time);
    				_that.timer=setTimeout(_shake,time/1.25);
    			}
    			_shake();
    		},
    		pause:function(){
    			var _that=this;
    			clearTimeout(_that.timer);
    		}
    	}

    	var btn_shake=document.getElementById('shake');
    	var btn_pause=document.getElementById('pause');
    	var btn_wrapper=document.getElementById('btn-wrapper');
    	btn_shake.onclick=function(){
    		btn_wrapper.classList.add('pause');
    		shakeObj.shake(1000);
    	}
    	btn_pause.onclick=function(){
    		btn_wrapper.classList.remove('pause');
    		shakeObj.pause();
    	}

    	window.onload=function(){
    		if (!navigator.vibrate) {
    			alert("您的浏览器不支持震动,iPhone手机任何浏览器都好像也不行额,用Android手机换最新版的UC浏览器或者chrome浏览器试试呢.\n\r ^_^||");
    		}
    	}
    	</script>
    </body>
</html>

